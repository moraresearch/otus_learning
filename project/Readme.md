Этот файл пердназначен для описания принципа работы моего проекта. 

Цель задания: 
Автоматизировать введение в работу кластера ELK.

Послдеовательность действий:

Создать 6 нод : 
  1. 3 "сервер" ноды, на который в последствии будет настроен elasticsearch  
  2. прокси - необходим как удобно резервируемая точка отказа 
  3. бакула - бэкап сервер
  4. клиент - должен же кто то отправить данные в кластер 
#### vagrant up

 Переход в папку с ansible инфраструктурой 
#### cd ansible 
 
Разом настроить весь кластер elasitcsearch 
#### ansible-playbook playbooks/project -e host=cluster -e elasticsearch=1

Настройка прокси 
#### ansible-playbook playbooks/project -e host=proxy -e proxy=1

Настройка клиента
#### ansible-playbook playbooks/project -e host=client -e client=1

Проверка:

Для начала надо подождать минут 10 чтобы там всё устаканилось ( пока логи запишутся пока примутся на отправку пока распарсятся logstash пока утрамбуются в elastic ) 
Если всё это прошло, значит мы увидим какие либо индексы по этой ссылке: 
http://192.168.11.151/app/kibana#/management/elasticsearch/index_management/indices 

Теперь надо проверить работу кластера: 
curl -XGET http://192.168.11.142:9200/_cluster/health?pretty

данный запрос должен показать количество нод - 3 

Теперь мы должны проверить работу бэкап сервера, в принципе достаточно зайти на него и проверить историю 

ssh mora@192.168.11.152 -i ./id_rsa 

sudo su 

bconsole 

status 5 


